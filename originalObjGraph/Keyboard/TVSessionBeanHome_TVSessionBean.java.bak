/*
 * generated by emit_jco(Dec 21 2000) on 04/21/01 at 06:32:32 PM
 *
 * Home interface implementation for session bean Keyboard.TVSessionBean
 */
package Keyboard;

import secant.portable.persistence.*;
import javax.ejb.*;
import secant.ejb.*;
import secant.util.*;


// begin_safe_additional_imports
// end_safe_additional_imports

public class TVSessionBeanHome_TVSessionBean extends javax.rmi.PortableRemoteObject implements Keyboard.TVSessionBeanHome
// begin_safe_additional_interfaces
// end_safe_additional_interfaces
{
	PropertyInfoPkg _deploymentPkg;
	javax.ejb.EJBMetaData _ejbMetaData;
	secant.ejb.EJBService _service;
	secant.util.Semaphore _openGate = new secant.util.Semaphore();
	String _jndiName;
	String _loc = null;

	// begin_safe_additional_instance_vars
	// end_safe_additional_instance_vars


	//
	// published interface
	//
	public Keyboard.TVSessionBeanObject create() throws javax.ejb.CreateException, java.rmi.RemoteException
	{
		Object saveHome = null;
		secant.ejb.policy.Supports _txpolicy = null;
		try {
			saveHome = secant.ejb.jndi.EJBServerJavaURLContext.getCurrentHome();
			secant.ejb.jndi.EJBServerJavaURLContext.setCurrentHome(this);
            secant.security.Security.provider.setPropagation(secant.security.SecurityService.SP_received);
			_txpolicy = new secant.ejb.policy.Supports("Keyboard.TVSessionBeanHome.createTVSessionBean", _service);
			// begin_safe_createTVSessionBean
			// end_safe_createTVSessionBean
			return (Keyboard.TVSessionBeanObject)
				_service.allocateStatelessSessionBean(_jndiName);
		}
		catch (Throwable _t) {
			_reportException("createTVSessionBean",_t);
			if (_t instanceof javax.ejb.CreateException)
			   throw (javax.ejb.CreateException)_t;
			throw new javax.ejb.CreateException("-- createTVSessionBean error: "+_t.getMessage()+" -- "+_t.toString());
		}
		finally {
			secant.ejb.jndi.EJBServerJavaURLContext.setCurrentHome(saveHome);
			if (_txpolicy != null)
				_txpolicy.cleanup();
		}
	}

	//
	// The following remains as emitted
	//

	/*
	 * Ctor -- called by an EJB service, e.g., an EJBService instance.
	 */
	public TVSessionBeanHome_TVSessionBean(PropertyInfoPkg depInfoPkg) throws java.rmi.RemoteException
	{
		try {
			_deploymentPkg = depInfoPkg;
			_service = (secant.ejb.EJBService) _deploymentPkg.getProperties().get("ejbServiceObject");
			_jndiName = depInfoPkg.getProperty("jndiName");
			_ejbMetaData = new secant.ejb.EJBMetaDataValue(this, "Keyboard.TVSessionBeanHome", "Keyboard.TVSessionBeanObject", null, true, false);

			// begin_safe_TVSessionBeanHome_TVSessionBean
			// end_safe_TVSessionBeanHome_TVSessionBean

			_openGate.signal();
		}
		catch (Exception _t) {
			_reportException("ctor",_t);
			throw new java.rmi.RemoteException(_t.toString());
		}
	}

	/*
	 * Inherited from EJBHome
	 */
	public javax.ejb.EJBMetaData getEJBMetaData()
	{
		return _ejbMetaData;
	}

	public void remove(Object primaryKey) throws javax.ejb.RemoveException
	{
		throw new javax.ejb.RemoveException("no primary key in session bean");
	}

	public void remove(javax.ejb.Handle handle) throws javax.ejb.RemoveException, java.rmi.RemoteException
	{
	}

	public HomeHandle getHomeHandle()
	{
		return new secant.ejb.HomeHandleValue(this);
	}

	void _reportException(String method, Throwable t)
	{
		// begin_safe__reportException
		if (method==null || !method.equals("findByPrimaryKey"))
			t.printStackTrace();
		if (t instanceof java.lang.RuntimeException) {
			try {
				new secant.extreme.Client().setRollbackOnly();
				secant.util.NoThrow.throwException(
					new javax.transaction.TransactionRolledbackException(t.getMessage()+" -- "+t.toString()));
			}
			catch (Exception e) {}
		}
		// end_safe__reportException
	}
	// begin_safe_additional_methods
	// end_safe_additional_methods
}

/*    -- begin 
// begin_safe_orphaned user code
// end_safe_orphaned user code
*/ // -- end 
